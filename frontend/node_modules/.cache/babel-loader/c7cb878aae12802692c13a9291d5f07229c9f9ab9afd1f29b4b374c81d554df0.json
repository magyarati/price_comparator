{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import Filters from'./components/Filters';import BasketBuilder from'./components/BasketBuilder';import BasketSummary from'./components/BasketSummary';import ProductList from'./components/ProductList';import PriceHistoryChart from'./components/PriceHistoryChart';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const[products,setProducts]=useState([]);const[store,setStore]=useState('');const[selectedName,setSelectedName]=useState('');const[dateFilter,setDateFilter]=useState('');const[basketResult,setBasketResult]=useState(null);const[historyProduct,setHistoryProduct]=useState(null);useEffect(()=>{const params=new URLSearchParams();if(store)params.append('store',store);if(dateFilter)params.append('date',dateFilter);axios.get(\"/api/products?\".concat(params.toString())).then(res=>setProducts(res.data)).catch(console.error);},[store,dateFilter]);const productNames=Array.from(new Set(products.map(p=>p.name))).sort();const filtered=products.filter(p=>!selectedName||p.name===selectedName);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl mb-4\",children:\"Price Comparator\"}),/*#__PURE__*/_jsx(BasketBuilder,{productNames:productNames,onResult:setBasketResult}),basketResult&&/*#__PURE__*/_jsx(BasketSummary,{data:basketResult}),/*#__PURE__*/_jsx(Filters,{store:store,setStore:setStore,selectedName:selectedName,setSelectedName:setSelectedName,dateFilter:dateFilter,setDateFilter:setDateFilter,productNames:productNames}),/*#__PURE__*/_jsx(ProductList,{products:filtered,onShowHistory:setHistoryProduct}),historyProduct&&/*#__PURE__*/_jsx(PriceHistoryChart,{product:historyProduct})]});}","map":{"version":3,"names":["React","useState","useEffect","axios","Filters","BasketBuilder","BasketSummary","ProductList","PriceHistoryChart","jsx","_jsx","jsxs","_jsxs","App","products","setProducts","store","setStore","selectedName","setSelectedName","dateFilter","setDateFilter","basketResult","setBasketResult","historyProduct","setHistoryProduct","params","URLSearchParams","append","get","concat","toString","then","res","data","catch","console","error","productNames","Array","from","Set","map","p","name","sort","filtered","filter","className","children","onResult","onShowHistory","product"],"sources":["/Users/magyarattila/Documents/GitHub/price_comparator/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Filters from './components/Filters';\nimport BasketBuilder from './components/BasketBuilder';\nimport BasketSummary from './components/BasketSummary';\nimport ProductList from './components/ProductList';\nimport PriceHistoryChart from './components/PriceHistoryChart';\n\nexport default function App() {\n  const [products, setProducts] = useState([]);\n  const [store, setStore] = useState('');\n  const [selectedName, setSelectedName] = useState('');\n  const [dateFilter, setDateFilter] = useState('');\n  const [basketResult, setBasketResult] = useState(null);\n  const [historyProduct, setHistoryProduct] = useState(null);\n\n  useEffect(() => {\n    const params = new URLSearchParams();\n    if (store) params.append('store', store);\n    if (dateFilter) params.append('date', dateFilter);\n\n    axios\n      .get(`/api/products?${params.toString()}`)\n      .then(res => setProducts(res.data))\n      .catch(console.error);\n  }, [store, dateFilter]);\n\n  const productNames = Array.from(new Set(products.map(p => p.name))).sort();\n  const filtered = products.filter(p => !selectedName || p.name === selectedName);\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-xl mb-4\">Price Comparator</h1>\n\n      <BasketBuilder\n        productNames={productNames}\n        onResult={setBasketResult}\n      />\n      {basketResult && <BasketSummary data={basketResult} />}\n\n      <Filters\n        store={store}\n        setStore={setStore}\n        selectedName={selectedName}\n        setSelectedName={setSelectedName}\n        dateFilter={dateFilter}\n        setDateFilter={setDateFilter}\n        productNames={productNames}\n      />\n\n      <ProductList products={filtered} onShowHistory={setHistoryProduct} />\n\n      {historyProduct && (\n        <PriceHistoryChart product={historyProduct} />\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}